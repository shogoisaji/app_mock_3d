# task_index.yaml
# タスク管理システム総合インデックス
# バージョン: 1.0
# 作成日: 2025-08-04

# ══════════════════════════════════════════════════════════════════
# プロダクト基礎知識
# ══════════════════════════════════════════════════════════════════

product_knowledge:
  description: "AppMock3D - iPhone 3Dモデルに画像を適用するiOSアプリ"
  overview: |
    iPhoneの3Dモデルに任意のPNG画像を適用し、3D空間で自由に操作・プレビューして
    高品質なPNG画像として保存できるiOSアプリケーション。
    SceneKitとSwiftUIを活用したモダンなアーキテクチャで構築する。

  status_indicators:
    "backlog": "未実施 - まだ開始されていないタスク"
    "in_progress": "実装中 - 現在進行中のタスク"
    "done": "実装済み - 完了したタスク"
    "blocked": "何らかの理由で停止中のタスク"

  task_management:
    description: "YAMLファイルベースのタスク管理フロー"
    individual_task_file: "task_###_(内容).yaml で個別のタスクを詳細に定義"
    master_task_list: "task_list.yaml で全タスクのステータスを一覧管理"
    workflow: "task_list.yaml を見て次に着手すべきタスクを判断"
    naming_convention: "task_[3桁番号]_[内容説明].yaml (例: task_001_project_setup.yaml)"

# ══════════════════════════════════════════════════════════════════
# 技術スタック・環境情報
# ══════════════════════════════════════════════════════════════════

tech_stack:
  description: "AppMock3Dで使用する技術スタックと環境情報"

  languages:
    primary: "Swift 5.9"
    secondary: "Metal Shading Language (シェーダー用)"
    version_requirements: "Swift 5.9+, iOS 15.0+"

  frameworks:
    primary_3d: "SceneKit"
    ui: "SwiftUI"
    graphics: "Metal (オプション)"
    testing: "XCTest"
    build_tools: "Xcode 15+"

  databases:
    primary: "UserDefaults (設定保存)"
    cache: "NSCache (テクスチャキャッシュ)"
    file_format: "JSON (プロジェクトファイル)"

  infrastructure:
    deployment: "App Store / TestFlight"
    ci_cd: "Xcode Cloud (予定)"
    monitoring: "Xcode Instruments"

  development_tools:
    package_manager: "Swift Package Manager"
    linting: "SwiftLint"
    type_checking: "Swift Compiler"

# ══════════════════════════════════════════════════════════════════
# テストコマンド・品質管理
# ══════════════════════════════════════════════════════════════════

test_commands:
  description: "品質保証のためのテスト・検証コマンド"

  unit_tests:
    command: "⌘+U (Xcode) または xcodebuild test"
    coverage_command: "Xcode Code Coverage Report"
    watch_mode: "Xcode Continuous Testing"

  integration_tests:
    command: "XCTest UI Testing Framework"
    setup_command: "Simulator起動とアプリインストール"
    teardown_command: "Simulator状態リセット"

  e2e_tests:
    command: "XCUITest フレームワーク"
    device_setup: "複数デバイス・iOS バージョンでのテスト"
    parallel_execution: "Xcode Server並列実行"

  code_quality:
    lint_command: "swiftlint lint"
    format_command: "swiftformat ."
    type_check_command: "Swift Compiler (ビルド時)"
    security_scan: "Xcode Static Analyzer"

  build_verification:
    build_command: "⌘+B (Xcode) または xcodebuild build"
    preview_command: "Xcode Preview / Simulator実行"
    size_analysis: "App Thinning Size Report"

# ══════════════════════════════════════════════════════════════════
# エスカレーションルール・問題解決
# ══════════════════════════════════════════════════════════════════

escalation_rules:
  description: "問題発生時のエスカレーション手順（3回失敗ルール）"

  failure_handling:
    rule: "同じ失敗・エラーを3回繰り返したら作業を停止"
    actions:
      1: "失敗詳細をタスクファイルに記録"
      2: "タスクステータスをblockedに変更"
      3: "開発チームリーダーに報告"

    report_format:
      channel: "開発チーム Slack"
      message_template: |
        🚨 タスクブロック報告
        タスクID: {task_id}
        タイトル: {task_title}
        失敗内容: {error_description}
        最終失敗時刻: {timestamp}

# ══════════════════════════════════════════════════════════════════
# AppMock3D 固有の品質基準
# ══════════════════════════════════════════════════════════════════

app_quality_standards:
  description: "AppMock3D特有の品質基準と要件"

  performance_requirements:
    target_fps: 60
    memory_limit: "テクスチャキャッシュ 50MB以下"
    startup_time: "3秒以内"
    export_time: "高品質PNG出力 10秒以内"

  device_compatibility:
    minimum_requirements:
      - "iPhone 12以降"
      - "iOS 15.0+"
      - "Metal対応必須"
      - "RAM 2GB以上"
    recommended_specs:
      - "RAM 4GB以上"
      - "ストレージ 1GB以上の空き容量"

  user_experience_standards:
    gesture_responsiveness: "タップ・ドラッグ・ピンチ操作の即座な反応"
    visual_quality: "60fps滑らかな3Dレンダリング"
    error_handling: "直感的なエラーメッセージと回復手順"

# ══════════════════════════════════════════════════════════════════
# メタデータ
# ══════════════════════════════════════════════════════════════════

metadata:
  version: "1.0"
  created_at: "2025-08-04T15:00:00+09:00"
  updated_at: "2025-08-04T15:00:00+09:00"
  author: "AppMock3D Development Team"
  description: "AppMock3D開発プロジェクトのタスク管理システム総合ガイド"
  usage: |
    AppMock3D開発における新しい要件が発生した際に参照し、
    適切なタスク定義と管理を行うためのガイドとして使用する。
    spec.yamlに定義された要件を実装するための包括的なタスク管理を提供する。